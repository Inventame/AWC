<link rel="import" href="../bower_components/polymer/polymer.html"><link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../bower_components/paper-progress/paper-progress.html"><dom-module id="awc-page-preloading"><template><style is="custom-style">:host{transform:translateZ(0);top:0;left:0;right:0;height:4px;width:100%;z-index:9999;position:fixed}; #preloader{width:100%;--paper-progress-transition-duration:0.04s;--paper-progress-transition-timing-function:ease;--paper-progress-transition-transition-delay:0s;--paper-progress-container-color:rbga(255,255,255,0.3)}.fadeOut{-webkit-transition:opacity 3s ease-in-out;-moz-transition:opacity 3s ease-in-out;-ms-transition:opacity 3s ease-in-out;-o-transition:opacity 3s ease-in-out;transition:opacity 3s ease-in-out;opacity:0}</style><paper-progress id="preloader" value="{{value}}" max="{{max}}" indeterminate=""></paper-progress></template><script>Polymer({is:"awc-page-preloading",properties:{max:{type:Number,value:1e3},value:{type:Number,value:1},media:{type:Boolean,value:!0},color:{type:String,value:"#2196f3"}},_max:0,created:function(){var e=this,a=function(){var a=document.querySelectorAll("script, link, img, video, audio");e._max=0;for(var o=0;o<a.length;o++){var r=a[o],t=r.nodeName;"VIDEO"==t||"AUDIO"==t?(e._max++,r.addEventListener("loadeddata",function(){e.value++})):"IMG"==t?(e._max++,r.onload=function(){e.value++}):"SCRIPT"!=t&&"LINK"!=t||(e._max++,r.onload=function(){e.value++})}};a()},attached:function(){this.max=this._max,this.value=0},ready:function(){var e=this;e.media&&(e.$.preloader.indeterminate=!1),document.querySelector("#primaryProgress").style.background=e.color,window.onload=function(){e.$.preloader.value=e.max,e.$.preloader.classList.add("fadeOut"),e.fire("load")}}});</script></dom-module>